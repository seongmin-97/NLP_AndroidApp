# chapter 3 - 04 배열과 컬렉션

제어문에는 조건문과 반복문이 있는데, 반복문을 제대로 이해하기 위해서는 데이터 타입 배열과 컬렉션을 알아야 한다.

Int와 Double과 같은 기본 타입은 모두 하나의 변수에 하나의 값만 저장하도록 설계되어 있다. 그런데 프로그래밍을 하다 보면 하나의 변수에 여러 개의 값을 저장해야 할 필요성이 있다. 코틀린 뿐만 아니라 대부분의 언어들은 이렇게 여러 개의 값을 하나의 변수에 저장할 수 있도록 배열(Array)와 컬렉션(Collection)이라는 데이터 타입을 제공한다.

1. 배열

    여러 개의 값을 담을 수 있는 대표적인 자료형인 배열(Array)은 값을 담기 전에 먼저 배열 공간의 개수를 할당하거나 초기화 시에 데이터를 저장해두면 데이터의 개수만큼 배열의 크기가 결정된다. 먼저 개수를 정해놓고 사용해야 하며 중간에 개수를 추가하거나 제거할 수 없다.

    배열은 다른 데이터 타입과 마찬가지로 변수에 저장해서 사용할 수 있으며 다음과 같이 선언한다.

    ```kotlin
    var "변수" = Array("개수")
    ```

    배열 객체는 Int, Long, Char 등과 같은 기본 타입 뒤에 Array를 붙여서 만든다.

    ```kotlin
    var students = IntArray(10)
    var longArray = LongArray(10)
    var CharArray = CharArray(10)
    var FloatArray = FloatArray(10)
    var DoubleArray = DoubleArray(10)
    ```

    첫 줄을 보면 변수 students에 Int 공간을 10개 할당하라는 의미이다. 아직은 공간을 만들어놓기만 하고 값을 정하지 않았기 때무에 무슨 값이 들어있는 지 모른다. 이 공간은 0부터 차례대로 세며 공간을 10개 할당했다면 [0]부터 [9]까지 공간이 배정되어 있다.

    - 문자 배열에 빈 공간 할당하기

        String은 기본 타입이 아니기 때문에 StringArray는 없지만 아래와 같이 사용할 수 있다. 수식이 조금 특이해 보이지만, 일단 괄호 안의 첫번째 숫자인 10만 변경해서 사용하면 그 숫자만큼 빈 문자열로 된 배열 공간을 할당한다.

        ```kotlin
        var stringArray = Array(10, {item->""})
        ```

    - 값으로 배열 공간 할당하기

        arrayOf()함수를 사용해서 String값을 직접 할당할 수도 있다.

        ```kotlin
        var dayArray = arrayOf("Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun")
        ```

    - 배열에 값 입력하기

        다음은 배열의 인덱스에 있는 값을 바꾸는 방법을 다른 방식으로 표현한 것이다. 이 두 방식은 표현식만 다를 뿐 동일한 코드이다.

        ```kotlin
        "배열명"["인덱스"] = "값"
        ```

        ```kotlin
        "배열명".set("인덱스", "값")
        ```

        위는 파이썬을 쓸 때와 동일하고, 아래는 set 함수를 사용한 것이다. 다음 예제를 보며 이해하자.

        ```kotlin
        students[0] = 90
        students.set(1, 91)
        // ... 순서대로 했다고 가정하고
        students.set(9, 99)
        ```

        이렇게 되면 각 인덱스 별로 모두 값이 할당되면서 배열에 빈 공간이 없이 모두 값이 할당되었다. 만약 배열의 범위를 벗어난 인덱스에 값을 넣으면 Exception이 발생하고 프로그램이 종료된다.

    - 배열에 있는 값 꺼내기

        값을 입력할 때와 같은 방식으로 인덱스로 값을 가져올 수 있다. 저장할 때 set함수를 썼다면 꺼낼 때는 get함수를 쓸 수 잇다.

        ```kotlin
        "배열명"["인덱스"]
        ```

        ```kotlin
        "배열명".get("인덱스")
        ```

        다음은 배열에 있는 값을 다른 변수에 저장하는 예제이다.

        ```kotlin
        var seventhValue = intArray[6]
        var tenthValue = intArray.get(9)
        ```

2. 컬렉션

    여러 개의 값을 넣을 수 있는 자료형에는 배여 외에도 컬렉션(Collection)이 있다. 컬렉션은 동적 배열이라고도 하는데, 이는 배열과는 다르게 공간의 크기를 처음 크기로 고정하지 않고 임의의 개수를 담을 수 있기 때문이다.

    컬렉션은 크게 세 가지로 리스트(List), 맵(Map), 셋(Set)이 있으며 다음과 같이 사용할 수 있다.

    - 리스트(List)

        리스트는 저장되는 데이터에 인덱스를 부여한 컬렉션이며 중복된 값을 입력할 수 있다. 코틀린에서 동적으로 리스느를 사용하기 우해 리스트 자료형 앞에 뮤터블(Mutable)이라는 접두어(prefix)가 붙는다. 접두어가 없는 리스트도 있지만 잘 사용하지 않기 때문에 항상 mutableList, mutableMap, mutableSet을 사용한다고 알고 있자.

        사용법은 Array와 같이 '데이터 타입Of' 형태로 사용할 수 있다.

        ```kotlin
        var mutableList = mutableListOf("Mon", "Tue", "Wed")
        ```

        mutableList 변수에 3개의 값을 가진 크기가 3인 동적 배열 리스트가 생성되었다. 여기에 값을 추가하려면 다음과 같이 작성하면 된다. 값이 추가되면서 동적으로 리스트의 고악ㄴ이 자동으로 증가한다.

        ```kotlin
        mutableList.add("Thu")
        ```

        또한 인덱스를 따로 지정하지 않아도 입력되는 순서대로 인덱스가 저장된다. 즉 Thu의 인덱스는 3이 될 것이다.

        리스트에 입력된 값을 사용할 때는 get 함수를 사용한다. 입력할 때와는 다르게 사용할 때는 인덱스를 지정해서 몇 번째 값을 꺼낼 것인지 명시해야 한다. 다음은 두 번째 값을 변수에 저장하는 예시이다.

        ```kotlin
        var variable = mutableList.get(1)
        ```

        리스트에 있는 값을 수정할 때는 set함수를 쓴다. 다음은 두 번째 값을 수정하는 예시이다.

        ```kotlin
        mutableList.set(1, "수정할 값")
        ```

        리스트에 있는 값을 제거할 때는 removeAt 함수를 사용한다. 리스트에서 값이 사라지면 사라진 값의 뒤에 있던 인덱스가 당겨져서 값이 사라진 인덱스에서 사용된다.

        ```kotlin
        mutableList.removeAt(1)
        ```

        아무것도 없는 빈 리스트를 생성하면 앞으로 입력되는 값의 데이터 타입을 알 수 없기 때문에 값의 타입을 추론할 수 없다. 그래서 빈 컬렉션의 경우 앞에서처럼 '데이터 타입Of'만으로는 생성되지 않고 데이터 타입을 직접적으로 알려주는 방법을 사용해야 한다.

        ```kotlin
        var "변수명" = mutableListOf<"컬렉션에 입력된 값의 타입">()
        var stringList = mutableListOf<String>()
        ```

        다음 예제와 같이 문자열로 된 빈 리스트를 생성하고 조작할 수 있다.

        ```kotlin
        var stringList = mutableListOf<String>() //문자열로 된 빈 컬렉션 생성
        //입력
        stringList.add("월")
        stringList.add("화")
        //사용
        Log.d("collection", "stringList에 입려된 두 번째 값은 ${stringList.get(1)}입니다.")
        //수정
        stringList.set(1, "수정된 값")
        //삭제
        stringList.removeAt(1) 
        ```

        size 속성을 사용하면 컬렉션의 개수를 가져올 수 잇다.

        ```kotlin
        mutableList.size
        ```

        앞서 set, get은 함수라고 하고, size는 속성(프로퍼티)라고 했는데 이 둘을 구분하는 방법은 괄호의 유무이다. 나중에 다시 한 번 알아보자.

    - 셋(Set)

        셋은 중복을 허용하지 않는 리스트라고 할 수 있다. 리스트와 유사한 구조이지만 인덱스로 조회할 수 없고 get함수도 지원하지 않는다.

        String 타입의 값을 입력받기 위해 다음과 같이 선언할 수 있다.

        ```kotlin
        var set = mutableSetOf<String>()
        ```

        add함수를 사용해서 추가할 수 있는데 중복을 허용하지 않기 때문에 중복으로 입력하려고 해도 입력되지 않는다.

        ```kotlin
        set = mutableSetOf<String>()

        set.add("Jan")
        set.add("Feb")
        set.add("Mar")
        set.add("Jan") // 동일한 값은 입력되지 않습니다.
        ```

        셋은 인덱스를 조회하는 함수가 없기 때문에 특정 위치의 값을 직접 사용할 수 없다. 다음은 셋의 모든 값을 출력하는 예제이다.

        ```kotlin
        Log.d("Collection", "Set 전체 출력 = ${set}")
        ```

        셋의 특정 값을 삭제할 때는 remove함수를 사용한다. 셋은 중복되지 않기 때문에 값으로 직접 조회해서 삭제할 수 있다.

        ```kotlin
        set.remove("Feb")
        ```

    - 맵(Map)

        맵은 키(Key)와 값(Value)의 쌍으로 입력되는 컬렉션이다. 맵의 키는 마치 리스트의 인덱스와 비슷한데 리스트와 다르게 키를 직접 입력해야 한다.

        제네릭으로 키와 값의 데이터 타입을 지정해서 맵을 생성한다. 다음은 키와 값의 타입을 모두 String으로 사용하기 위한 생성 예제이다.

        ```kotlin
        var map = mutableMapOf<String, String>()
        ```

        인덱스에 해당하는 키를 직접 지정해서 사용해야 한다. 다음은 빈 맵을 생성하고 추가하는 예제이다. 추가할 때는 put 함수에 키와 값을 입력하면 된다.

        ```kotlin
        var map = mutableMapOf<String, String>()
        map.put("key1", "value1")
        map.put("key2", "value2")
        map.put("key3", "value3")
        ```

        키와 값을 추가할 때마다 리스트처럼 공간이 늘어난다. 값을 꺼내서 사용할 때는 get함수에 키를 입력해서 값을 꺼낼 수 있다.

        ```kotlin
        Log.d("CollectionMap", "map에 입력된 key1의 값은 ${map.get('key1')}입니다.")
        ```

        수정할 때는 put함수를 사용한다. 동일한 키를 가진 값이 있으면 키는 유지된 채로 그 값만 수정된다.

        ```kotlin
        map.put("key2", "수정")
        ```

        삭제할 때는 remove함수에 키를 입력해서 삭제할 수 있다. 리스트와는 다르게 인덱스에 해당하는 키의 값이 변경되지 않고 그대로 유지된다.

        ```kotlin
        map.remove("key2")
        ```

    컬렉션에 입력되는 값은 각각을 엘리먼트(Element)라고 한다. 값이라고 해도 되지만 맵을 지칭할 때 엘리먼트 자체를 가리키는 건지, 실제 값을 가르키는 건지 헷갈릴 수 있기 때문에 엘리먼트라고 이해하는 것이 좋다. 

    엘리먼트는 맵의 입력단위인 키와 값을 합친 것을 말하는데 이것은 리스트와 셋에서도 동일한 용어로 사용되낟. 즉, 리스트의 값 또한 엘리먼트라고 부른다.

3. 이뮤터블 컬렉션

    코틀린은 일반 배열처럼 크기를 변경할 수 없으면서 값 또한 변경할 수 없는 이뮤터블 컬렉션(Immutable Collection)을 지원한다. 기존 컬렉션에서 mutable이라는 접두어가 제거된 형태로 사용된다.

    ```kotlin
    var list = listOf("1", "2")
    ```

    불변형 컬렉션은 한 번 입력된 값을 변경할 수 없기 때문에 add나 set 함수는 지원하지 않고 최초 입력된 값을 사용만 할 수 있다.

    ```kotlin
    val IMMUTABLE_LIST = listOf("Jan", "Feb", "Mar") //생성
    Log.d("Collection", "리스트의 두번재 값은 ${IMMUTABLE_LIST.get(1)}입니다.") //사용
    ```

    배열과 다른 점은 크기 뿐만 아니라 값의 변경 또한 불가능하다는 것이다. 다라서 이뮤터블 컬렉션은 상수처럼 기준이 되는 어떤 값의 모음을 하나의 변수에 젖아할 필요가 있거나 여러 개의 값을 중간에 수정하지 않고 사용할 필요가 있을 때 사용한다. 상수처럼 변수명을 대문자로 표시하는게 좋다.